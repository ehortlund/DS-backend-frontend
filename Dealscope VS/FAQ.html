<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Dealscope</title>
    <link rel="icon" href="/assets/FAVICON.png" type="image/x-icon">
    <link rel="stylesheet" href="FAQ.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;500;600;700;800&display=swap" rel="stylesheet">

</head>

<body>
    <!-- Header -->
    <header class="main-header">
        <!-- Klickbar Logotyp -->
        <a href="index.html">
            <img class="logo" src="assets/DS LOGO laying.svg" alt="DealScope Logo">
        </a>

          <!-- Mobilmenyn -->
          <div class="mobile-menu">
            <!-- Hamburgarikonen -->
            <button class="menu-btn" aria-label="Open menu"></button>

            <!-- Själva mobilnavigeringen -->
            <nav class="mobile-nav" id="mobile-nav">
                <a href="deals.html">Deals</a>
                <a href="index.html">Home</a>
                <a href="plans.html">Plans</a>
                <a href="FAQ.html">FAQ</a>
                <a class="login-btn" href="login.html">Log in</a>
            </nav>
          </div>

        <!-- Desktop Navigation -->
        <nav class="desktop-nav">
            <a href="deals.html">Deals</a>
            <a href="index.html">Home</a>
            <a href="plans.html">Plans</a>
            <a href="FAQ.html">FAQ</a>
            <a class="login-btn" href="login.html">Log in</a>
        </nav>
    </header>

            <!-- Overlay för profilsidan -->
            <div id="profile-overlay" class="profile-overlay"></div>

            <!-- Modal för profilsidan -->
            <div id="profile-modal" class="profile-modal">
                <div class="profile-modal-content">
                    <span id="close-profile-modal" class="close-modal">×</span>
                    <div class="profile-modal-inner">
                        <!-- Sidomeny -->
                        <nav class="profile-sidebar">
                            <ul>
                                <li><a href="#" class="active" data-section="profile">Profile</a></li>
                                <li><a href="#" data-section="payment-settings">Payment Settings</a></li>
                                <li><a href="#" data-section="settings">Settings</a></li>
                                <li><a href="#" data-section="contact">Contact</a></li>
                                <li><a href="#" id="logout-btn-modal">Log out</a></li>
                            </ul>
                        </nav>
                        <!-- Innehållsdel -->
                        <div class="profile-content">
                            <!-- Profilsektion -->
                            <div id="profile-section" class="content-section active">
                                <h2>Profile</h2>
                                <p>Username: <span id="profile-username"></span></p>
                                <p>Email: <span id="profile-email"></span></p>
                            </div>
                            <!-- Betalningsinställningar -->
                            <div id="payment-settings-section" class="content-section">
                                <h2>Payment Settings</h2>
                                <p>Manage your payment methods and subscription details here.</p>
                            </div>
                            <!-- Inställningar -->
                            <div id="settings-section" class="content-section">
                                <h2>Settings</h2>
                                <p>Adjust your account settings, notifications, and preferences.</p>
                            </div>
                            <!-- Kontakt -->
                            <div id="contact-section" class="content-section">
                                <h2>Contact</h2>
                                <p>Need help? Reach out to us at <a href="mailto:info@dealscope.io">info@dealscope.io</a>.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

    <section class="faq-section fade-in">
        <div class="container">
            <h1 class="faq-title">FAQ</h1>
            <p class="faq-subtitle">Find answers to all your questions here!</p>
    
            <div class="faq-item fade-in">
                <h2 class="faq-question">What is DealScope?</h2>
                <p class="faq-answer">
                    DealScope is a service that provides unique insights into major deals and their supply chains. 
                    Our goal is to help you understand the market dynamics and identify key investment opportunities.
                </p>
            </div>
    
            <div class="faq-item fade-in">
                <h2 class="faq-question">How does DealScope work?</h2>
                <p class="faq-answer">
                    We gather and analyze data from the largest deals and their supply chains. 
                    The information is presented in a clear way, helping you make better investment decisions.
                </p>
            </div>
    
            <div class="faq-item fade-in">
                <h2 class="faq-question">What types of deals can I follow?</h2>
                <p class="faq-answer">
                    You can track major deals across various industries, including technology, manufacturing, and energy. 
                    We focus on deals that have significant economic impacts.
                </p>
            </div>
    
            <div class="faq-item fade-in">
                <h2 class="faq-question">What payment methods do you accept?</h2>
                <p class="faq-answer">
                    We accept major international credit cards, including Visa and Mastercard, as well as PayPal.
                </p>
            </div>
    
            <div class="faq-item fade-in">
                <h2 class="faq-question">What is the difference between Pro and Pro+?</h2>
                <p class="faq-answer">
                    Pro gives you full access to all features for $29/month. With Pro+, you also get a 6-month premium plan, 
                    which includes additional insights not available on Pro plans.
                </p>
            </div>
    
            <div class="faq-item fade-in">
                <h2 class="faq-question">What is the difference between Pro+ and Pro+ 6-month plan?</h2>
                <p class="faq-answer">
                    Pro+ includes all features for $29/month and adds exclusive content. The 6-month Pro+ plan offers a one-time payment with added benefits such as free updates during the subscription period.
                </p>
            </div>
    
            <div class="faq-item fade-in">
                <h2 class="faq-question">Can I cancel my subscription?</h2>
                <p class="faq-answer">
                    We offer a 14-day money-back guarantee for new subscriptions. Contact us if you are not satisfied.
                </p>
            </div>
    
            <div class="faq-item fade-in">
                <h2 class="faq-question">How do I cancel my subscription?</h2>
                <p class="faq-answer">
                    You can cancel your subscription at any time by logging into your account and selecting "Cancel Subscription" under the account settings.
                </p>
            </div>
        </div>
    </section>    
 

    <footer class="footer">
      <div class="footer-container">
        <!-- Vänster sektion -->
        <div class="footer-logo-section">
            <img src="assets/DS LOGO laying.svg" alt="DealScope Logo" class="footer-logo">
            <p>© 2025 DealScope. All rights reserved.</p>
        </div>

        <!-- Mitten sektion -->
        <div class="footer-links-section">
            <ul>
                <li><a href="deals.html">Deals</a></li>
                <li><a href="index.html">Home</a></li>
                <li><a href="plans.html">plans</a></li>
                <li><a href="FAQ.html">FAQ</a></li>
                <li><a href="login.html">Log in</a></li>
            </ul>
        </div>

        <!-- Höger sektion -->
        <div class="footer-info-section">
            <ul>
                <li><a href="mailto:info@dealscope.io">info@dealscope.io</a></li>
                <li>SE0206198616</li>
                <li><a href="#privacy-policy">Privacy policy</a></li>
                <li><a href="#cookies">Cookies</a></li>
            </ul>
        </div>
      </div>
    </footer>

  <!-- Script -->
  <script src="script.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', async () => {
        const loginButtons = document.querySelectorAll('.login-btn');
        const profileModal = document.getElementById('profile-modal');
        const profileOverlay = document.getElementById('profile-overlay');
        const closeProfileModal = document.getElementById('close-profile-modal');
        const header = document.querySelector('.main-header');
        const sidebarLinks = document.querySelectorAll('.profile-sidebar a');
        const contentSections = document.querySelectorAll('.content-section');
        const logoutButton = document.getElementById('logout-btn');
        const profileUsername = document.getElementById('profile-username');
        const profileEmail = document.getElementById('profile-email');

        console.log("FAQ.html: DOMContentLoaded triggad");
        console.log("Antal loginButtons:", loginButtons.length);
        console.log("profileModal:", profileModal);
        console.log("profileOverlay:", profileOverlay);

        // Funktion för att uppdatera login-knapparnas text och länk
        async function updateLoginButton() {
            try {
                const response = await fetch('/api/users/me', {
                    method: 'GET',
                    credentials: 'include'
                });

                const data = await response.json();

                if (data.error) {
                    // Användaren är inte inloggad, visa "Log in"
                    loginButtons.forEach(button => {
                        console.log("Användare inte inloggad, sätter 'Log in' på knapp:", button);
                        button.textContent = 'Log in';
                        button.href = '/login.html';
                        button.removeEventListener('click', openProfileModal);
                    });
                } else {
                    // Användaren är inloggad, visa användarnamnet och förbered för att öppna profilsidan
                    loginButtons.forEach(button => {
                        console.log("Användare inloggad, sätter username:", data.username, "på knapp:", button);
                        button.textContent = data.username;
                        button.href = '#';
                        button.addEventListener('click', openProfileModal);
                        console.log("Klick-event kopplat till knapp:", button);
                    });

                    // Fyll i profilinformation
                    if (profileUsername && profileEmail) {
                        profileUsername.textContent = data.username;
                        profileEmail.textContent = data.email;
                    }
                }
            } catch (error) {
                console.error('Error fetching user data:', error);
                loginButtons.forEach(button => {
                    button.textContent = 'Log in';
                    button.href = '/login.html';
                    button.removeEventListener('click', openProfileModal);
                });
            }
        }

        // Funktion för att öppna profilsidan
        function openProfileModal(event) {
            event.preventDefault();
            console.log("openProfileModal kallad");
            console.log("profileModal före:", profileModal.style.display);
            console.log("profileOverlay före:", profileOverlay.style.display);
            profileModal.style.display = 'flex';
            profileOverlay.style.display = 'block';
            header.style.zIndex = '0';
            console.log("profileModal efter:", profileModal.style.display);
            console.log("profileOverlay efter:", profileOverlay.style.display);
        }

        // Funktion för att stänga profilsidan
        function closeProfileModalHandler() {
            console.log("closeProfileModalHandler kallad");
            profileModal.style.display = 'none';
            profileOverlay.style.display = 'none';
            header.style.zIndex = '1';
        }

        // Hantera sidomenyn
        sidebarLinks.forEach(link => {
            link.addEventListener('click', (event) => {
                event.preventDefault();
                const section = link.getAttribute('data-section');
                if (section) {
                    sidebarLinks.forEach(l => l.classList.remove('active'));
                    contentSections.forEach(s => s.classList.remove('active'));
                    link.classList.add('active');
                    document.getElementById(`${section}-section`).classList.add('active');
                }
            });
        });

        // Hantera utloggning
        if (logoutButton) {
            logoutButton.addEventListener('click', (event) => {
                event.preventDefault();
                fetch('/api/users/logout', {
                    method: 'POST',
                    credentials: 'include'
                })
                .then(() => {
                    closeProfileModalHandler();
                    updateLoginButton();
                    window.location.replace('/login.html');
                })
                .catch(() => {
                    window.location.replace('/login.html');
                });
            });
        }

        // Stäng modalen vid klick på krysset
        if (closeProfileModal) {
            closeProfileModal.addEventListener('click', closeProfileModalHandler);
        }

        // Kör vid sidladdning
        updateLoginButton();
    });
</script>
</body>
</html>
