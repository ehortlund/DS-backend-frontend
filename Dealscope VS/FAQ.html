<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Dealscope</title>
    <link rel="icon" href="/assets/FAVICON.png" type="image/x-icon">
    <link rel="stylesheet" href="FAQ.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;500;600;700;800&display=swap" rel="stylesheet">
</head>

<body>
    <!-- Header -->
    <header class="main-header">
        <!-- Klickbar Logotyp -->
        <a href="index.html">
            <img id="header-logo" class="logo" src="assets/DS LOGO laying.svg" alt="DealScope Logo">
        </a>

        <!-- Mobilmenyn -->
        <div class="mobile-menu">
            <!-- Hamburgarikonen -->
            <button class="menu-btn" aria-label="Open menu"></button>

            <!-- Själva mobilnavigeringen -->
            <nav class="mobile-nav" id="mobile-nav">
                <a href="deals.html">Deals</a>
                <a href="index.html">Home</a>
                <a href="plans.html">Plans</a>
                <a href="FAQ.html">FAQ</a>
                <a class="login-btn" href="login.html">Log in</a>
                <button class="theme-toggle-btn" aria-label="Toggle Theme">
                    <img id="mobile-moon-icon" class="theme-icon moon-icon" src="assets/Moon red.svg" alt="Moon Icon">
                    <img id="mobile-sun-icon" class="theme-icon sun-icon" src="assets/Sun grey.svg" alt="Sun Icon">
                </button>
            </nav>
        </div>

        <!-- Desktop Navigation -->
        <nav class="desktop-nav">
            <a href="deals.html">Deals</a>
            <a href="index.html">Home</a>
            <a href="plans.html">Plans</a>
            <a href="FAQ.html">FAQ</a>
            <a class="login-btn" href="login.html">Log in</a>
            <button class="theme-toggle-btn" aria-label="Toggle Theme">
                <img id="desktop-moon-icon" class="theme-icon moon-icon" src="assets/Moon red.svg" alt="Moon Icon">
                <img id="desktop-sun-icon" class="theme-icon sun-icon" src="assets/Sun grey.svg" alt="Sun Icon">
            </button>
        </nav>
    </header>

    <!-- Overlay för profilsidan -->
    <div id="profile-overlay" class="profile-overlay fade-in"></div>

    <!-- Modal för profilsidan -->
    <div id="profile-modal" class="profile-modal fade-in">
        <div class="profile-modal-content fade-in">
            <span id="close-profile-modal" class="close-modal fade-in">×</span>
            <div class="profile-modal-inner fade-in">
                <!-- Sidomeny -->
                <nav class="profile-sidebar fade-in">
                    <ul class="fade-in">
                        <li class="fade-in"><a href="#" class="active" data-section="profile">Profile</a></li>
                        <li class="fade-in"><a href="#" data-section="payment-settings">Payment Settings</a></li>
                        <li class="fade-in"><a href="#" data-section="settings">Settings</a></li>
                        <li class="fade-in"><a href="#" data-section="contact">Contact</a></li>
                        <li class="fade-in"><a href="#" id="logout-btn-modal">Log out</a></li>
                    </ul>
                </nav>
                <!-- Innehållsdel -->
                <div class="profile-content fade-in">
                    <!-- Profilsektion -->
                    <div id="profile-section" class="content-section active fade-in">
                        <h2 class="fade-in">Profile</h2>
                        <p class="fade-in">Username: <span id="profile-username"></span></p>
                        <p class="fade-in">Email: <span id="profile-email"></span></p>
                    </div>
                    <!-- Betalningsinställningar -->
                    <div id="payment-settings-section" class="content-section fade-in">
                        <h2 class="fade-in">Payment Settings</h2>
                        <p class="fade-in">Manage your payment methods and subscription details here.</p>
                    </div>
                    <!-- Inställningar -->
                    <div id="settings-section" class="content-section fade-in">
                        <h2 class="fade-in">Settings</h2>
                        <p class="fade-in">Adjust your account settings, notifications, and preferences.</p>
                    </div>
                    <!-- Kontakt -->
                    <div id="contact-section" class="content-section fade-in">
                        <h2 class="fade-in">Contact</h2>
                        <p class="fade-in">Need help? Reach out to us at <a href="mailto:info@dealscope.io">info@dealscope.io</a>.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <section class="faq-section fade-in">
        <div class="container fade-in">
            <h1 class="faq-title fade-in">FAQ</h1>
            <p class="faq-subtitle fade-in">Find answers to all your questions here!</p>
    
            <div class="faq-item fade-in">
                <h2 class="faq-question fade-in">What is DealScope?</h2>
                <p class="faq-answer fade-in">
                    DealScope is a service that provides unique insights into major deals and their supply chains. 
                    Our goal is to help you understand the market dynamics and identify key investment opportunities.
                </p>
            </div>
    
            <div class="faq-item fade-in">
                <h2 class="faq-question fade-in">How does DealScope work?</h2>
                <p class="faq-answer fade-in">
                    We gather and analyze data from the largest deals and their supply chains. 
                    The information is presented in a clear way, helping you make better investment decisions.
                </p>
            </div>
    
            <div class="faq-item fade-in">
                <h2 class="faq-question fade-in">What types of deals can I follow?</h2>
                <p class="faq-answer fade-in">
                    You can track major deals across various industries, including technology, manufacturing, and energy. 
                    We focus on deals that have significant economic impacts.
                </p>
            </div>
    
            <div class="faq-item fade-in">
                <h2 class="faq-question fade-in">What payment methods do you accept?</h2>
                <p class="faq-answer fade-in">
                    We accept major international credit cards, including Visa and Mastercard, as well as PayPal.
                </p>
            </div>
    
            <div class="faq-item fade-in">
                <h2 class="faq-question fade-in">What is the difference between Pro and Pro+?</h2>
                <p class="faq-answer fade-in">
                    Pro gives you full access to all features for $29/month. With Pro+, you also get a 6-month premium plan, 
                    which includes additional insights not available on Pro plans.
                </p>
            </div>
    
            <div class="faq-item fade-in">
                <h2 class="faq-question fade-in">What is the difference between Pro+ and Pro+ 6-month plan?</h2>
                <p class="faq-answer fade-in">
                    Pro+ includes all features for $29/month and adds exclusive content. The 6-month Pro+ plan offers a one-time payment with added benefits such as free updates during the subscription period.
                </p>
            </div>
    
            <div class="faq-item fade-in">
                <h2 class="faq-question fade-in">Can I cancel my subscription?</h2>
                <p class="faq-answer fade-in">
                    We offer a 14-day money-back guarantee for new subscriptions. Contact us if you are not satisfied.
                </p>
            </div>
    
            <div class="faq-item fade-in">
                <h2 class="faq-question fade-in">How do I cancel my subscription?</h2>
                <p class="faq-answer fade-in">
                    You can cancel your subscription at any time by logging into your account and selecting "Cancel Subscription" under the account settings.
                </p>
            </div>
        </div>
    </section>    
 
    <footer class="footer fade-in">
      <div class="footer-container fade-in">
        <!-- Vänster sektion -->
        <div class="footer-logo-section fade-in">
            <img id="footer-logo" src="assets/DS LOGO laying.svg" alt="DealScope Logo" class="footer-logo fade-in">
            <p class="fade-in">© 2025 DealScope. All rights reserved.</p>
        </div>

        <!-- Mitten sektion -->
        <div class="footer-links-section fade-in">
            <ul class="fade-in">
                <li class="fade-in"><a href="deals.html">Deals</a></li>
                <li class="fade-in"><a href="index.html">Home</a></li>
                <li class="fade-in"><a href="plans.html">plans</a></li>
                <li class="fade-in"><a href="FAQ.html">FAQ</a></li>
                <li class="fade-in"><a href="login.html">Log in</a></li>
            </ul>
        </div>

        <!-- Höger sektion -->
        <div class="footer-info-section fade-in">
            <ul class="fade-in">
                <li class="fade-in"><a href="mailto:info@dealscope.io">info@dealscope.io</a></li>
                <li class="fade-in">SE0206198616</li>
                <li class="fade-in"><a href="#privacy-policy">Privacy policy</a></li>
                <li class="fade-in"><a href="#cookies">Cookies</a></li>
            </ul>
        </div>
      </div>
    </footer>

    <!-- Script -->
    <script src="script.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            const loginButtons = document.querySelectorAll('.login-btn');
            const profileModal = document.getElementById('profile-modal');
            const profileOverlay = document.getElementById('profile-overlay');
            const closeProfileModal = document.getElementById('close-profile-modal');
            const header = document.querySelector('.main-header');
            const sidebarLinks = document.querySelectorAll('.profile-sidebar a');
            const contentSections = document.querySelectorAll('.content-section');
            const logoutButton = document.getElementById('logout-btn-modal');
            const profileUsername = document.getElementById('profile-username');
            const profileEmail = document.getElementById('profile-email');
            const headerLogo = document.getElementById('header-logo');
            const footerLogo = document.getElementById('footer-logo');
            const desktopMoonIcon = document.getElementById('desktop-moon-icon');
            const desktopSunIcon = document.getElementById('desktop-sun-icon');
            const mobileMoonIcon = document.getElementById('mobile-moon-icon');
            const mobileSunIcon = document.getElementById('mobile-sun-icon');

            // Intersection Observer för att trigga fade-in-animationer vid skroll
            const fadeInElements = document.querySelectorAll('.fade-in');
            const observerOptions = {
                root: null,
                rootMargin: '0px',
                threshold: 0.1
            };

            const observer = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('show');
                        observer.unobserve(entry.target);
                    }
                });
            }, observerOptions);

            fadeInElements.forEach(element => {
                observer.observe(element);
            });

            // Funktion för att uppdatera SVG:er baserat på tema
            function updateSVGs(theme) {
                if (theme === 'bright') {
                    if (headerLogo) headerLogo.src = 'assets/DS LOGO laying bright.svg';
                    if (footerLogo) footerLogo.src = 'assets/DS LOGO laying bright.svg';
                    if (desktopMoonIcon) desktopMoonIcon.src = 'assets/Moon grey.svg';
                    if (desktopSunIcon) desktopSunIcon.src = 'assets/Sun red.svg';
                    if (mobileMoonIcon) mobileMoonIcon.src = 'assets/Moon grey.svg';
                    if (mobileSunIcon) mobileSunIcon.src = 'assets/Sun red.svg';
                } else {
                    if (headerLogo) headerLogo.src = 'assets/DS LOGO laying.svg';
                    if (footerLogo) footerLogo.src = 'assets/DS LOGO laying.svg';
                    if (desktopMoonIcon) desktopMoonIcon.src = 'assets/Moon red.svg';
                    if (desktopSunIcon) desktopSunIcon.src = 'assets/Sun grey.svg';
                    if (mobileMoonIcon) mobileMoonIcon.src = 'assets/Moon red.svg';
                    if (mobileSunIcon) mobileSunIcon.src = 'assets/Sun grey.svg';
                }
            }

            // Hämta tema från localStorage och tillämpa det vid sidladdning
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'bright') {
                document.documentElement.classList.add('bright-mode');
                updateSVGs('bright');
            } else {
                updateSVGs('dark');
            }

            // Lägg till klick-event för temaväxlingsknapparna
            const themeToggleButtons = document.querySelectorAll('.theme-toggle-btn');
            themeToggleButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const htmlElement = document.documentElement;
                    if (htmlElement.classList.contains('bright-mode')) {
                        htmlElement.classList.remove('bright-mode');
                        localStorage.setItem('theme', 'dark');
                        updateSVGs('dark');
                    } else {
                        htmlElement.classList.add('bright-mode');
                        localStorage.setItem('theme', 'bright');
                        updateSVGs('bright');
                    }
                });
            });

            // Funktion för att uppdatera login-knapparnas text och länk
            async function updateLoginButton() {
                try {
                    const response = await fetch('/api/users/me', {
                        method: 'GET',
                        credentials: 'include'
                    });

                    const data = await response.json();

                    if (data.error) {
                        loginButtons.forEach(button => {
                            console.log("Användare inte inloggad, sätter 'Log in' på knapp:", button);
                            button.textContent = 'Log in';
                            button.href = '/login.html';
                            button.removeEventListener('click', openProfileModal);
                        });
                    } else {
                        loginButtons.forEach(button => {
                            console.log("Användare inloggad, sätter username:", data.username, "på knapp:", button);
                            button.textContent = data.username;
                            button.href = '#';
                            button.addEventListener('click', openProfileModal);
                            console.log("Klick-event kopplat till knapp:", button);
                        });

                        if (profileUsername && profileEmail) {
                            profileUsername.textContent = data.username;
                            profileEmail.textContent = data.email;
                        }
                    }
                } catch (error) {
                    console.error('Error fetching user data:', error);
                    loginButtons.forEach(button => {
                        button.textContent = 'Log in';
                        button.href = '/login.html';
                        button.removeEventListener('click', openProfileModal);
                    });
                }
            }

            // Funktion för att öppna profilsidan
            function openProfileModal(event) {
                event.preventDefault();
                console.log("openProfileModal kallad");
                console.log("profileModal före:", profileModal.style.display);
                console.log("profileOverlay före:", profileOverlay.style.display);
                profileModal.style.display = 'flex';
                profileOverlay.style.display = 'block';
                header.style.zIndex = '0';
                console.log("profileModal efter:", profileModal.style.display);
                console.log("profileOverlay efter:", profileOverlay.style.display);
            }

            // Funktion för att stänga profilsidan
            function closeProfileModalHandler() {
                console.log("closeProfileModalHandler kallad");
                profileModal.style.display = 'none';
                profileOverlay.style.display = 'none';
                header.style.zIndex = '1';
            }

            // Hantera sidomenyn
            sidebarLinks.forEach(link => {
                link.addEventListener('click', (event) => {
                    event.preventDefault();
                    const section = link.getAttribute('data-section');
                    if (section) {
                        sidebarLinks.forEach(l => l.classList.remove('active'));
                        contentSections.forEach(s => s.classList.remove('active'));
                        link.classList.add('active');
                        document.getElementById(`${section}-section`).classList.add('active');
                    }
                });
            });

            // Hantera utloggning
            if (logoutButton) {
                logoutButton.addEventListener('click', (event) => {
                    event.preventDefault();
                    fetch('/api/users/logout', {
                        method: 'POST',
                        credentials: 'include'
                    })
                    .then(() => {
                        closeProfileModalHandler();
                        updateLoginButton();
                        window.location.replace('/login.html');
                    })
                    .catch(() => {
                        window.location.replace('/login.html');
                    });
                });
            }

            // Stäng modalen vid klick på krysset
            if (closeProfileModal) {
                closeProfileModal.addEventListener('click', closeProfileModalHandler);
            }

            // Kör vid sidladdning
            updateLoginButton();
        });
    </script>
</body>
</html>